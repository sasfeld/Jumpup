<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBsZwdJI29OQJgyUNPbucRH_l5r_NqSuH4&sensor=false"></script>
    <script>
var elevator;
var map;
var geocoder;
var infowindow = new google.maps.InfoWindow();
var berlin = new google.maps.LatLng(52.31, 13.24);
// store circles
var circleArray = new Array();

function initialize() {	
  var mapOptions = {
    zoom: 8,
    center: berlin,
    mapTypeId: 'terrain'
  }
  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  // Create an ElevationService
  elevator = new google.maps.ElevationService();
  
  geocoder = new google.maps.Geocoder(); 
 
 
}

/**
 * Add a gmap Circle on the map.
 * @param event the 
 */
function addCircle(event) {
	var latLngClick = event.latLng;
	
	 var circleOptions = {
		      strokeColor: '#FF0000',
		      strokeOpacity: 0.8,
		      strokeWeight: 2,
		      fillColor: '#FF0000',
		      fillOpacity: 0.35,
		      'map': map,
		      center: latLngClick,
		      radius: 100, // meters
		    };
    circle = new google.maps.Circle(circleOptions);
	  
	circleArray.push(circle.center);	
}


/**
 * Add a gmap Rectangle on the map.
 * @param event the 
 */
function addRectangle(event) {
	var latLngClick = event.latLng;
	var latLngNortEast = new google.maps.LatLng(latLngClick.lat() + 0.25, latLngClick.lng() + 0.5);
	var latLngSouthWest = new google.maps.LatLng(latLngClick.lat() - 0.25, latLngClick.lng() - 0.5);
	var latLngBounds = new google.maps.LatLngBounds(latLngSouthWest, latLngNortEast);
	
	rectangle = new google.maps.Rectangle();
	
	 var rectangleOptions = {
		      strokeColor: '#FF0000',
		      strokeOpacity: 0.8,
		      strokeWeight: 2,
		      fillColor: '#FF0000',
		      fillOpacity: 0.35,
		      'map': map,
		      center: latLngClick,
		      bounds: latLngBounds,
		    };
    rectangle = new google.maps.Rectangle(rectangleOptions);
   console.log(rectangle); 
	  
	
}



function drawPolyline() {
	  var myPolyline = new google.maps.Polyline({
		    path: circleArray,
		    strokeColor: '#FF0000',
		    strokeOpacity: 1.0,
		    strokeWeight: 2,	
		    'map': map,
		    draggable: true,
	  });
	  
	  console.log(myPolyline);
}

function setMode() {
	 var objMode = document.getElementById('geomObject').value;
// var objMode = this;
	google.maps.event.clearListeners(map, 'click');
	
	var callback;
	switch (objMode) {
	case "circle":
		callback = addCircle;
		break;
	case "rectangle":
		callback = addRectangle;
		break;
	}

	  // Add a listener for the click event and add a circle at the given position
	  google.maps.event.addListener(map, 'click', callback);
}
 


// google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
 <body onload="initialize()">
    <div id="map-canvas" style="float:left;width:800px;height:800px;"></div>
    <div id="map-control">
    	<input type="button" onclick="drawPolyline()" value="Draw polyline"/>
    	
    	    <b>Geometrisches Objekt:</b>
    <select id="geomObject" onchange="setMode()">
 		<option value="circle">Circle</option>      
 		<option value="rectangle">Rectangle</option>     		     
    </select>
    </div>
  </body>
</html>